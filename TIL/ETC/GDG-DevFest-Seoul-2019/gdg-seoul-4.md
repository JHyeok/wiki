# 웹서비스에서 MSA 톺아보기 (김한성, SKT)

기존 모놀리틱 
- 기능 하나를 수정하기 위해서는 단위 어플리케이션을 재배포해야 하는 문제.
즉 서비스가 중단이 된다.

무중단 배포를 꿈꾸지만 서비스가 커지거나 규모가 커지면 예상치 못한 문제가 발생한다.

SOA에서 파생된 MSA

MSA 3가지 요소
- API Gateway : API의 End-point를 통합
- Orchestration : 여러개의 서비스를 묶어서 하나의 서비스로 만듦 (서비스,컨테이너 배포 관리)
- Service Mesh : 서비스간의 통신 (네트워크 관리)
공통적으로 아직 표준이 없음.

장점
- 확장의 유연함(ex. 알림서비스 추가, scaling)
주문서비스의 웹서버만 증가시키던가 각각의 서비스에 스케일링이 가능
하나의 서비스가 죽었을 때, 전체 서비스에 영향이 적다

단점
- 장애 추적

microservices.io 예제들 많음.

On-Premise에서 MSA?
- 물리 서버 관리하는 것부터 일 - 네트워크, 스토리지 등
- 다양한 프레임워크를 쓰다보면 매번 새로운 장애 발생 - 라이브러리, 모듈 등
- 관리용 애플리케이션의 필요 - Cron, Montiroting, Batch 등
- Scaling(Up/Down/In/Out)등에 제약이 있음 - 서버 구매부터 설치까지

차라리 모놀리틱이 편한...?
꼭 지금 MSA가 정답은 아니다.

이제는 Serverless 시대이다.

대표적으로 람다
람다를 쓰면 MSA 환경으로 구축할 수 있다 라고 주장 
람다로도 MSA가 가능

문제는 Cloud는 모든게 비용이다.
개발 기간이 길어지면 당연히 돈, 잘못된 테스트도 당연히 돈.
로그(스토리지)또한 돈이다. 등등

onpremise에서 cloud 마이그레이션
- cloud에 맞게 커스텀이 필요함
- 잘못된 설계시 롤백의 위험성
- 러닝커브
- 결국 MSA는 커녕 일만 2배로...

Multi Cloud
terraform, serverless 프레임워크

여러가지 문제로 Hybrid Cloud까지 오게되었다.
Onpremise + public cloud

장비를 새로 사긴 그렇고, 기존 장비 인력 재활용하기 위해서
하이퍼바이저

그런데 답이 Docker가 있음.
쿠버네티스: 컨테이너화된 어플리케이션을 좀 더 쉽게 배포하고 관리해주는 솔루션
Istio 분산된 MSA 실행 지원하는 독립형 서비스 메시

문제는 진짜 답이 없습니다. MSA엔 정답이 없습니다.
사실 최적의 조화는 적절한 Cloud Service + k8s Cluster 사용
클라우드 서비스에서 데이터 스토어, k8s 클러스터에서 어플리케이션

멀티 클라우드에서는 하나의 클라우드를 리전으로 사용. GCP 리전, Azure 리전, AWS 리전
