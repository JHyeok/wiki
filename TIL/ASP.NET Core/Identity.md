### ASP.NET Core Identity
---

자바진영에는 Spring Security 
.NET 진영에는 ASP.NET Identity(Security)
- 사용자 로그인(인증)
- 사용자 Role (Admin, User, PowerUser)
- SMS 인증, Email 인증


로그인 2가지 방법론.
#### 1. Session
- 웹 서버가 사용자 정보를 메모리 담아놓고
사용자가 로그아웃 하면 메모리 날려버림
-> 보안성이 높다. 사용자 정보가 웹서버 안에서만 돌기때문에
해킹의 소지가 적음.
단점 : 웹서버 메모리 부하가 높아진다.

#### 2. Cookie
- 웹 서버 로그인 -> 사용자 정보 -> 브라우저 전달

-> 쿠키 , 웹서버의 부하가 낮아진다.
단점 : 보안성이 낮다. 사용자 컴퓨터는 이미 스파이웨어나 그런 바이러스가
설치될 수도 있음. 


#### 결론 : Cookie 방식을 가장 많이 씀.
- Cookie -> 암호화 -> 복호화 와 위변조의 위험.
보안하기 위해 SSL 인증서. 업체랑 계약관계를 맺어서
웹사이트를 통하는 JSON이나 XML이나 파일정보부터 시작해서
모든 입출력에 관련된 것을 SSL 인증회사에 넘겨서
이게 확인이 되면 그때 전송을 한다든지 그런방식.
쿠키는 위변조가 가능하기 때문에 웹사이트에 마치 로그인 된것처럼 할 수 있음.
 
SSL -> 유료, 무료(OPEN SSL)
-> 100만원, 20만원 매년 결재

아이덴티티는 쿠키베이스 로그인 인증이다.

Asp.net core identity (==spring mvc 의 시큐리티 부분이 코어에 있는것)

- 로그인, 로그아웃, 개별 인증(관리자, 일반사용자)
- 일반 사용자 (나이가 19세 이상 일 경우)


### identity 테이블 구조
1. dbo.AspNetUsers => ApplicationUser (유저클래스)
- id, 비밀번호, 사용자 이름...
id가 guid처럼 스트링키값인데 이게 다 커스터마이징이 가능하다. 한국형 게시판은 숫자

2. dbo.AspNetRoles => ApplicationRole (룰 클래스)
- 이 웹사이트에서의 회원 분류
- 슈퍼관리자, 관리자, 특별사용자, 일반사용자

3. dbo.AspNetUserRoles =>
1 번사용자 (pk1) > 관리자(1)
2 번사용자 (pk2) > 일반사용자(4)
유저 테이블하고 롤테이블 연결해주는 테이블이라고 생각하면 됨 프로시저에서 조인

4. dbo.AspNetUserCalaims => 5명의 사용자 -> 일반
사용자(Role)
- 2명이 나이 20세 미만 -> 20 세 미만은 특정 게시판 진입 금지
Age 20
[HttpGet, Authorize(Claims ... age >20)]
어노테이션 이용해서 타입하고 벨류 넣고 가능함

5. dbo.AspNetRoleClaims =>
위에가 유저에대한 claims이면 이건 룰에 관한것
관리자 - 1등,2등,3등

6. dbo.AspNetUserLogins => 외부 로그인 Oauth1.0/2.0
페이스북로그인, 네이버로그인 등.

---
#### 참고

개발토끼님 강좌